# Repository Guidelines

## Project Structure & Module Organization

The library is a TypeScript ESM package built with `tsup`.

- `src/` contains the public API and implementation: `src/index.ts` exports the client and query builder, with modules under `src/client/`, `src/builder/`, `src/utils/`, and `src/types/`.
- `test/` holds Vitest specs, split into `test/unit/` and `test/integration/`.
- `dist/` is the build output and is generated by `npm run build` (do not edit by hand).

## Build, Test, and Development Commands

- `npm install` installs dependencies.
- `npm run build` compiles TypeScript via `tsup` into `dist/`.
- `npm run dev` runs `tsup --watch` for local iteration.
- `npm test` runs the full Vitest suite once.
- `npm run test:watch` runs Vitest in watch mode.
- `npm run typecheck` runs `tsc --noEmit` for type safety.
- `npm run lint` runs ESLint checks.
- `npm run format` applies Prettier formatting.

## Coding Style & Naming Conventions

- Use TypeScript with ESM (`"type": "module"` in `package.json`).
- Formatting is enforced by Prettier (`singleQuote: true`, `semi: true`, `trailingComma: all`, `printWidth: 100`, default 2-space indent).
- Linting uses ESLint + `typescript-eslint`; avoid `console` in production code (warned by lint).
- Keep class names PascalCase and functions/variables camelCase (e.g., `QueryBuilder`, `buildWhereClause`).

## Testing Guidelines

- Test runner: Vitest; HTTP mocking uses `nock` where needed.
- Unit tests live in `test/unit/**` and integration tests in `test/integration/**`.
- Name tests descriptively by feature (e.g., `test/unit/builder/WhereClause.test.ts`).
- Run targeted tests with `npx vitest test/unit/builder/WhereClause.test.ts`.

## Commit & Pull Request Guidelines

- The repo does not enforce a strict commit format; keep messages short and imperative (e.g., `Add query validation`).
- PRs should include a clear summary, relevant test results (`npm test`, `npm run typecheck`), and any API changes noted in the description.
- If behavior changes, add or update tests under `test/unit/` or `test/integration/`.

## Configuration Notes

- Requires Node.js 18+ (native `fetch`).
- Avoid committing secrets; SODA app tokens should be passed at runtime (see `README.md` usage examples).
